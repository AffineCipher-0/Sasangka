/* --- VISUALS & DECORATIVE ELEMENTS --- */

/* Loading Screen */
.loader {
    position: fixed; top: 0; left: 0;
    width: 100vw; height: 100vh;
    background-color: var(--bg-deep-blue);
    z-index: 9999;
    display: flex; justify-content: center; align-items: center;
    transition: opacity 1s ease-out, visibility 1s ease-out;
    opacity: 1; visibility: visible;
}
.loader.hidden { opacity: 0; visibility: hidden; }
.loader-content {
    position: relative; width: 300px; height: 300px;
    display: flex; justify-content: center; align-items: center;
}
.loader-svg { position: absolute; width: 100%; height: 100%; transform: rotate(-90deg); }
.progress-ring__circle {
    stroke-dasharray: 817; stroke-dashoffset: 817;
    stroke-linecap: round;
    stroke: var(--accent-gold);
    animation: progress-animation 2.8s linear forwards;
}
.loader-text { text-align: center; }
.loader-text h2 {
    font-family: 'Cinzel Decorative', cursive; font-size: 2rem;
    color: var(--text-light); margin: 0; line-height: 1.2;
}
.loader-text p {
    font-family: 'Amiri', serif; font-size: 0.9rem;
    color: var(--text-light); opacity: 0.8; margin-top: 0.5rem;
}

/* Particle Canvases */
#particle-canvas, #starfield-canvas {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 0;
    pointer-events: none;
}
#starfield-canvas { z-index: 1; }

/* Astrolabe SVG */
#astrolabe-wrapper {
    position: absolute; top: 0; left: 50%;
    transform: translateX(-50%); width: 100vw; height: 100vh;
    display: flex; justify-content: center; align-items: center;
    z-index: 2; pointer-events: none;
}
#astrolabe-svg {
    width: 800px; height: 800px;
    max-width: 90vw; max-height: 90vh;
    opacity: 0.35;
    filter: drop-shadow(0 0 15px rgba(199, 165, 91, 0.5));
    transition: transform 0.2s ease-out;
}
#astrolabe-svg .astrolabe-st0 { fill: #c7a55b; }
#astrolabe-base > .astrolabe-st0 { fill: transparent; }
#astrolabe-svg .astrolabe-st1 { fill: none; stroke: #c7a55b; stroke-width: 2; }
#astrolabe-svg .astrolabe-st2 { fill: transparent; opacity: 0.7; }

/* Cover Page Hover Glow */
#cover-page .z-30 { transition: all 0.5s cubic-bezier(0.25, 0.8, 0.25, 1); }
#cover-page .z-30:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 25px rgba(0,0,0,0.3), 0 0 0 1px rgba(199, 165, 91, 0.4);
    border-color: rgba(199, 165, 91, 0.6);
}

/* Page Transition Gates */
#page-transition-loader {
    position: fixed;
    top: 0; left: 0;
    width: 100vw; height: 100vh;
    z-index: 9998;
    pointer-events: none;
    display: flex;
}
.transition-gate {
    width: 50vw;
    height: 100vh;
    background-color: #14233c;
    border-color: var(--accent-gold);
    transition: transform 1.2s cubic-bezier(0.77, 0, 0.175, 1);
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 5rem;
    color: var(--accent-gold);
    text-shadow: 0 0 15px var(--accent-gold);
    box-shadow: 0 0 30px rgba(0,0,0,0.5) inset;
}
#gate-left { transform: translateX(-100%); border-right-width: 2px; }
#gate-right { transform: translateX(100%); border-left-width: 2px; }

body.loading-transition #gate-left,
body.loading-transition #gate-right {
    transform: translateX(0);
}